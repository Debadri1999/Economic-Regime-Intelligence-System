<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ERIS — Economic Regime Intelligence System</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="css/style.css" />
  <script src="https://cdn.jsdelivr.net/npm/apexcharts@3.45.0/dist/apexcharts.min.js"></script>
</head>
<body>
  <canvas id="neural-bg" class="neural-bg" aria-hidden="true"></canvas>
  <div class="candlestick-ghosts">
    <svg class="candlestick-ghost bull" viewBox="0 0 100 120"><rect x="45" y="20" width="10" height="80" fill="currentColor"/><rect x="40" y="40" width="20" height="20" fill="currentColor"/></svg>
    <svg class="candlestick-ghost bear" viewBox="0 0 100 120"><rect x="45" y="20" width="10" height="80" fill="currentColor"/><rect x="40" y="60" width="20" height="20" fill="currentColor"/></svg>
    <svg class="candlestick-ghost bull" viewBox="0 0 100 120"><rect x="45" y="20" width="10" height="80" fill="currentColor"/><rect x="40" y="50" width="20" height="20" fill="currentColor"/></svg>
    <svg class="candlestick-ghost bear" viewBox="0 0 100 120"><rect x="45" y="20" width="10" height="80" fill="currentColor"/><rect x="40" y="55" width="20" height="20" fill="currentColor"/></svg>
  </div>

  <nav class="navbar" id="navbar">
    <a href="#" class="logo">E R I S</a>
    <div class="nav-links">
      <a href="#command-center">Command Center</a>
      <a href="#regimes">Regimes</a>
      <a href="#models">Models</a>
      <a href="#portfolio">Portfolio</a>
      <a href="#rankings">Stock Rankings</a>
      <a href="#shap">SHAP</a>
      <a href="#ai-briefing">AI Briefing</a>
      <a href="#system">System</a>
    </div>
    <div class="nav-status">
      <span class="status-dot active"></span> TRAINED
      <span class="status-dot data"></span> 2001-2021
      <span class="regime-badge transition" id="nav-regime-badge">TRANSITION</span>
    </div>
  </nav>

  <main>
    <!-- Section 1: Hero -->
    <section id="hero" class="section-hero">
      <h1 class="hero-title">E R I S</h1>
      <p class="hero-subtitle">ECONOMIC REGIME INTELLIGENCE SYSTEM</p>
      <div class="hero-stats">
        <div class="hero-stat">
          <span class="hero-stat-value count-up" data-target="1027681">0</span>
          <span class="hero-stat-label">Clean Rows</span>
        </div>
        <div class="hero-stat">
          <span class="hero-stat-value count-up" data-target="176">0</span>
          <span class="hero-stat-label">Features</span>
        </div>
        <div class="hero-stat">
          <span class="hero-stat-value count-up" data-target="144">0</span>
          <span class="hero-stat-label">OOS Months</span>
        </div>
        <div class="hero-stat">
          <span class="hero-stat-value count-up" data-target="5">0</span>
          <span class="hero-stat-label">Models</span>
        </div>
      </div>
    </section>

    <!-- Section 2: Command Center -->
    <section id="command-center">
      <h2 class="section-title">Command Center</h2>
      <p class="section-desc">War room view: regime alert, stress gauge, and analyst playbook.</p>
      <div class="regime-alert transition" id="regime-alert-banner">Current regime: TRANSITION — Increase monitoring.</div>
      <div class="dashboard-hero" style="display:grid;grid-template-columns:1fr 1.2fr;gap:2rem;margin-bottom:2rem;">
        <div class="stress-gauge-hero stress-gauge-pulse">
          <h3>Market Stress Gauge</h3>
          <div id="stress-gauge-hero" class="stress-gauge-large"></div>
          <div class="stress-legend">
            <span class="stress-zone low">0–25 Low</span>
            <span class="stress-zone med">25–50 Medium</span>
            <span class="stress-zone high">50–75 High</span>
            <span class="stress-zone extreme">75–100 Extreme</span>
          </div>
        </div>
        <div>
          <div class="kpi-grid-hero" id="hero-kpis">
            <div class="kpi-card hud-panel"><span class="kpi-value" id="kpi-stress">—</span><span class="kpi-label">Stress</span></div>
            <div class="kpi-card hud-panel"><span class="kpi-value" id="kpi-regime">—</span><span class="kpi-label">Regime</span></div>
            <div class="kpi-card hud-panel"><span class="kpi-value" id="kpi-sharpe">—</span><span class="kpi-label">Best Sharpe</span></div>
            <div class="kpi-card hud-panel"><span class="kpi-value" id="kpi-oos-r2">—</span><span class="kpi-label">Best IC</span></div>
          </div>
          <div class="hud-panel" style="margin-top:1.5rem;">
            <h3>ANALYST PLAYBOOK — Regime Strategy Cards</h3>
            <div class="playbook-grid" id="playbook-grid">
              <div class="playbook-card bull" data-regime="Bull">
                <strong>Bull</strong> — Expansion. Favor momentum & growth. SHAP: macro_dp, char_mom12m.
              </div>
              <div class="playbook-card transition active" data-regime="Transition">
                <strong>Transition</strong> — Mixed signals. Increase monitoring. SHAP: macro_ep, char_bm.
              </div>
              <div class="playbook-card bear" data-regime="Bear">
                <strong>Bear</strong> — Defensive. Quality tilt, reduce leverage. SHAP: macro_dfy, macro_svar.
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="interpretation-card hud-panel" style="margin-top:1.5rem;">
        <h3>What This Means for Your Business</h3>
        <div id="business-interpretation" class="interpretation-content"></div>
      </div>
    </section>

    <!-- Section 3: Regime Timeline -->
    <section id="regimes">
      <h2 class="section-title">Regime Detection & Stress Timeline</h2>
      <p class="section-desc">HMM-based regime states and stress index over time.</p>
      <div class="chart-card hud-panel"><div id="chart-regime" class="chart-container chart-tall"></div></div>
      <div class="chart-card hud-panel"><div id="chart-stress" class="chart-container"></div></div>
    </section>

    <!-- Section 4: Model Performance -->
    <section id="models">
      <h2 class="section-title">Model Performance</h2>
      <p class="section-desc">Radar comparison and full evaluation table.</p>
      <div class="chart-card hud-panel" style="margin-bottom:1.5rem;">
        <h3>Model Radar (IC, R², RMSE, Sharpe)</h3>
        <div id="chart-radar" class="chart-container"></div>
      </div>
      <div class="chart-card hud-panel">
        <h3>Full Model Table (R², RMSE, MAE, IC%, Sharpe)</h3>
        <div class="table-scroll">
          <table class="data-table hud-table" id="models-full-table">
            <thead><tr><th>Model</th><th>OOS R²</th><th>RMSE</th><th>MAE</th><th>IC %</th><th>Sharpe</th></tr></thead>
            <tbody></tbody>
          </table>
        </div>
      </div>
      <div class="chart-card hud-panel" style="margin-top:1.5rem;"><div id="chart-models" class="chart-container"></div></div>
    </section>

    <!-- Section 5: Portfolio -->
    <section id="portfolio">
      <h2 class="section-title">Portfolio</h2>
      <p class="section-desc">Per-model portfolio metrics and cumulative returns.</p>
      <div class="chart-card hud-panel" style="margin-bottom:1.5rem;">
        <h3>Portfolio Metrics by Model</h3>
        <div class="table-scroll">
          <table class="data-table hud-table" id="portfolio-full-table">
            <thead><tr><th>Model</th><th>Sharpe</th><th>Max DD</th><th>Alpha</th><th>L/S Spread</th></tr></thead>
            <tbody></tbody>
          </table>
        </div>
      </div>
      <div class="chart-card hud-panel chart-hero"><div id="chart-portfolio" class="chart-container chart-tall"></div></div>
    </section>

    <!-- Section 5b: Stock Ranking Signal -->
    <section id="rankings">
      <h2 class="section-title">Stock Ranking Signal</h2>
      <p class="section-desc">Model-predicted return rankings for the latest OOS month. Use as a screening input — not as a standalone buy/sell list.</p>

      <div class="model-selector hud-panel">
        <label for="ranking-model-select">Select Model:</label>
        <select id="ranking-model-select">
          <option value="XGBoost" selected>XGBoost (Best Sharpe: 0.47)</option>
          <option value="RegimeNN">RegimeNN (Best IC: 4.80%)</option>
          <option value="LightGBM">LightGBM (IC: 3.11%)</option>
          <option value="Ridge">Ridge</option>
          <option value="OLS">OLS</option>
        </select>
      </div>

      <div class="chart-card hud-panel" style="margin-bottom:1.5rem;">
        <h3>Predicted Return by Decile</h3>
        <div id="chart-deciles" class="chart-container"></div>
        <p class="chart-note">Decile 10 = highest predicted return (long candidates). Decile 1 = lowest (short/avoid). Spread = strategy signal.</p>
      </div>

      <div class="ranking-grid">
        <div class="chart-card hud-panel bull-accent">
          <h3>Top 20 — Long Candidates</h3>
          <div class="table-scroll">
            <table id="top-stocks-table" class="data-table hud-table">
              <thead><tr><th>Rank</th><th>PERMNO</th><th>Pred Return</th><th>SIC2</th></tr></thead>
              <tbody></tbody>
            </table>
          </div>
        </div>
        <div class="chart-card hud-panel bear-accent">
          <h3>Bottom 20 — Short/Avoid</h3>
          <div class="table-scroll">
            <table id="bottom-stocks-table" class="data-table hud-table">
              <thead><tr><th>Rank</th><th>PERMNO</th><th>Pred Return</th><th>SIC2</th></tr></thead>
              <tbody></tbody>
            </table>
          </div>
        </div>
      </div>

      <div class="hud-panel" id="regime-screening-panel">
        <h3>Regime-Conditioned Screening Guidance</h3>
        <div id="regime-screening-content"></div>
      </div>

      <div class="disclaimer hud-panel">
        <strong>Disclaimer:</strong> These rankings reflect model predictions on historical data (latest: Dec 2021). They are NOT investment recommendations. Use as one input within a diversified investment process. Stocks identified by CRSP PERMNO — map to tickers via WRDS.
      </div>
    </section>

    <!-- Section 6: SHAP Intelligence -->
    <section id="shap">
      <h2 class="section-title">SHAP Intelligence</h2>
      <p class="section-desc">Feature importance by regime and regime-conditional R².</p>
      <div class="chart-card hud-panel" style="margin-bottom:1.5rem;">
        <h3>Regime-Conditional R² Heatmap</h3>
        <div class="table-scroll">
          <table class="data-table hud-table" id="regime-r2-table">
            <thead><tr><th>Model</th><th>Bull</th><th>Transition</th><th>Bear</th></tr></thead>
            <tbody></tbody>
          </table>
        </div>
      </div>
      <div class="shap-grid">
        <div class="chart-card hud-panel"><h3>Bull</h3><div id="chart-shap-bull" class="chart-container chart-shap"></div></div>
        <div class="chart-card hud-panel"><h3>Bear</h3><div id="chart-shap-bear" class="chart-container chart-shap"></div></div>
        <div class="chart-card hud-panel"><h3>Transition</h3><div id="chart-shap-transition" class="chart-container chart-shap"></div></div>
      </div>
    </section>

    <!-- Section: AI Briefing — Warnings, Precautions, Mitigation -->
    <section id="ai-briefing">
      <h2 class="section-title">AI Intelligence Briefing</h2>
      <p class="section-desc">Regime-based early warnings, precautions, and mitigation steps for portfolio managers.</p>
      <div class="ai-briefing-grid">
        <div class="ai-card hud-panel">
          <h3>Current Forecast</h3>
          <div id="ai-forecast" class="ai-content"></div>
        </div>
        <div class="ai-card hud-panel warning-card">
          <h3>Early Warnings</h3>
          <ul id="ai-warnings" class="ai-list"></ul>
        </div>
        <div class="ai-card hud-panel mitigation-card">
          <h3>Mitigation Steps</h3>
          <ul id="ai-mitigations" class="ai-list"></ul>
        </div>
      </div>
    </section>

    <!-- Section 7: System Architecture -->
    <section id="system">
      <h2 class="section-title">System Architecture</h2>
      <p class="section-desc">NN architecture and pipeline flow.</p>
      <div class="chart-card hud-panel" style="margin-bottom:1.5rem;">
        <h3>Regime-Aware NN Architecture</h3>
        <div class="nn-flow">
          <span class="nn-node">macro(8)</span>
          <span class="nn-arrow">→</span>
          <span class="nn-node">Encoder [8→64→32→16]</span>
          <span class="nn-arrow">→</span>
          <span class="nn-node">Embed(16)</span>
          <span class="nn-arrow">+</span>
          <span class="nn-node">char(168)</span>
          <span class="nn-arrow">→</span>
          <span class="nn-node">Predictor [184→128→64→32→1]</span>
          <span class="nn-arrow">→</span>
          <span class="nn-node">ret_excess</span>
        </div>
      </div>
      <div class="chart-card hud-panel">
        <h3>Pipeline (8 steps)</h3>
        <div class="pipeline-cards">
          <div class="pipeline-card"><span class="step-num">1</span> Load panel</div>
          <div class="pipeline-card"><span class="step-num">2</span> Feature eng.</div>
          <div class="pipeline-card"><span class="step-num">3</span> Expanding window</div>
          <div class="pipeline-card"><span class="step-num">4</span> Baselines</div>
          <div class="pipeline-card"><span class="step-num">5</span> Regime NN</div>
          <div class="pipeline-card"><span class="step-num">6</span> HMM + stress</div>
          <div class="pipeline-card"><span class="step-num">7</span> Portfolio</div>
          <div class="pipeline-card"><span class="step-num">8</span> SHAP</div>
        </div>
      </div>
      <div class="chart-card hud-panel" style="margin-top:1.5rem;">
        <h3>Dataset & Config</h3>
        <p class="section-desc" id="dataset-info-text">Gu, Kelly & Xiu (2020) | 1.03M rows, 176 features, 144 OOS months (2010–2021)</p>
      </div>
    </section>

    <!-- Section 8: Footer -->
    <footer class="site-footer">
      <p><strong>ERIS v2.0</strong> | Debadri Sanyal | MS BAIM Purdue Daniels | Spring 2026</p>
      <p>Data: Gu, Kelly & Xiu (2020) | AI Tools: Claude, Cursor, Synthesia</p>
      <p><a href="https://github.com" target="_blank" rel="noopener">GitHub</a> · <a href="https://linkedin.com" target="_blank" rel="noopener">LinkedIn</a></p>
    </footer>
  </main>

  <script src="js/app.js"></script>
</body>
</html>
