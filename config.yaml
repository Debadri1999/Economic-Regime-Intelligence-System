# ERIS - Economic Regime Intelligence System
# Configuration (secrets in .env)
# Course dataset: Gu, Kelly & Xiu (2020) â€” monthly panel, 94 characteristics + 8 macro + industry dummies.

project:
  name: ERIS
  version: "0.2.0"

# Course data (Data1 = parquet files; no text/NLP in this pipeline)
course:
  # Path to folder containing YYYYMM.parquet files (e.g. Data1 or data/raw/Data1)
  parquet_dir: "Data1"
  # "full" = 1957-2021, "recent" = 2001-2021 (justify as modern algorithmic era)
  sample: "recent"
  # First out-of-sample prediction month (expanding window: train up to t-1, predict t)
  first_prediction_year: 2010
  # Optimization: retrain baselines every N months (3=quarterly), NN every M months (6=semi-annual). Matches ERIS_Optimized_Pipeline.ipynb
  retrain_baselines_every: 3
  retrain_nn_every: 6
  # Macro columns for regime HMM and stress index (must exist in parquet)
  # Must match parquet columns (e.g. macro_dp, macro_ep, macro_bm, macro_ntis, macro_tbl, macro_tms, macro_dfy, macro_svar)
  macro_cols:
    - macro_dp
    - macro_tbl
    - macro_tms
    - macro_dfy
    - macro_svar
    - macro_ep
    - macro_ntis
    - macro_bm
  # Stress index: weights for term spread (tms), default spread (dfy), stock variance (svar)
  stress_weights:
    macro_tms: -1.0   # inverted yield curve = stress
    macro_dfy: 1.0
    macro_svar: 1.0

# Data sources - API keys in .env: NEWSAPI_KEY, FRED_API_KEY
data:
  newsapi:
    base_url: "https://newsapi.org/v2/everything"
    queries:
      - "inflation"
      - "recession"
      - "fed policy"
      - "credit markets"
      - "banking stress"
      - "liquidity crisis"
      - "yield curve"
      - "rate hike"
      - "quantitative tightening"
      - "unemployment"
      - "earnings miss"
      - "default risk"
    max_results_per_query: 20
    max_requests_per_day: 100

  fed:
    base_url: "https://www.federalreserve.gov"
    fomc_calendar: "/monetarypolicy/fomccalendars.htm"
    speeches: "/newsevents/speeches.htm"
    backfill_from_year: 2006

  market:
    yfinance_tickers:
      - SPY
      - "^VIX"
      - GLD
      - TLT
      - HYG
    fred_series:
      - DGS10      # 10Y Treasury
      - DGS2       # 2Y Treasury
      - T10Y2Y     # 10Y-2Y spread
      - BAMLH0A0HYM2  # HY spread
      - UNRATE     # Unemployment
      - CPIAUCSL   # CPI
    rolling_windows: [5, 21, 63]

  preprocessing:
    dedup_jaccard_threshold: 0.85
    min_word_count: 20
    market_close_hour_et: 16

# NLP
nlp:
  finbert_model: "ProsusAI/finbert"
  sentence_transformer: "all-MiniLM-L6-v2"
  bertopic:
    umap_n_neighbors: 15
    umap_n_components: 5
    hdbscan_min_cluster_size: 15
    hdbscan_min_samples: 5
  embedding_rolling_days: 63
  sentiment_rolling_days: 21
  sentiment_shock_std_threshold: 2.0

# Regime detection
regime:
  hmm_n_components: 3
  hmm_n_iter: 100
  changepoint_window_days: 5
  changepoint_composite_threshold: 3
  xgb_max_depth_range: [3, 7]
  transition_alert_threshold: 0.15
  transition_window_days: 5

# LLM (API key in .env: OPENAI_API_KEY)
llm:
  model: "gpt-4"
  max_tokens: 1024
  cache_ttl_hours: 24

# App
app:
  default_days: 365
  page_title: "ERIS - Economic Regime Intelligence System"
